# HTTPとは?

## HTTPとは何か？

クライアントとサーバーが相互に通信する方法を標準化したTCP/IPベースのアプリケーション層の通信プロトコル。
インターネット上でコンテンツのリクエストとレスポンスが送信される方法が定義されている。
アプリケーション層とはクライアントとサーバが通信する方法を標準化した抽象化層。
HTTPのウェルノンポートは80番が使用されHTTPSでは443番が使用される。

## HTTP/0.9

HTTP/9/0はGETメソッドしかないシンプルなプロトコルであった。
クライアントがサーバにWebページへのリクエストは以下のようなものだった。

``` text
GET /index.html
```

サーバはリクエストに対して、HTMLでレスポンスを返してコンテンツが送信されるとすぐに接続を閉じていた。

HTTP/0.9では`<isindex>`タグを使用することでテキストの入力欄を表示させて「フォーム」と「検索」をおこなうことができた。
`<isindex>`タグを使用するとURLの末尾に`?`と単語(区切り文字は+)をつけてリクエストが送信される。
サーバは送られてきたリクエストを処理してクライアントにHTML作成せてレスポンスを送信する。

HTTP/0.9の時点では現在のHTTPと違い以下のような違いがあった。

- 一度の通信で1つのドキュメントしか送信することができない
- レスポンスとして、HTML以外のコンテンツを送ることができない
- 新しい文書の送信, 更新, 削除を行うことができない
- ステータスコードがないためリクエストやレスポンスが正しく行ったかを知ることができない

## HTTP/1.0

HTML/1.0ではHTMLでの応答以外にも画像, ビデオ, プレーンテキストなどさまざまなコンテンツタイプへの応答形式に対応できるようになった。
さらに、メソッドにもPOSTやHEADなどのメソッドが追加され、応答結果を識別するステータスコードが追加された。
他にもまる日パートタイプやキャッシュ, 認証, コンテンツエンコーディングなどさまざまな要素が追加された。
クライアントは、以下のようなさまざまな情報を含めてリクエストを送信できるようになった。

``` text
GET / HTTP/1.0
Host: example
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)
Accept: */*
```

サーバからのレスポンスでは以下のように最初にステータスコードが記述される。
`Content-Type`によってサーバはクライアントにHTTP以外の任意のファイルを返却することができるようになっている。

``` text
HTTP/1.0 200 OK
Content-Type: text/plain
Content-Length: 137582
Expires: Thu, 05 Dec 2024 16:00:00 GMT
Last-Modified: Wed, 5 August 2024 15:55:28 GMT
Server: Apache 0.84

(response body)
(connection closed)
```

HTTP/1.0は、HTTP/0.9と比べ大きな進化をしているが大きな欠点がある。
それは、1つの接続で１つのリクエストしか行うことができないことである。
そのため、クライアントはサーバから何かしらのコンテンツが必要となると、新しいTCP接続を開きコンテンツを取得しなければならない。
取得するコンテンツの数が多いほど、新しいTCP接続を開く数も増える(3ウェイハンドシェイクを行う必要がある)ためパフォーマンスが大幅に低下してしまう。

### 3ay handshake

TCPではクライアントとサーバ間でデータのやり取りを開始するときに以下のような手順をを行っている。

1. クライアントからサーバに対してのアクセス要求
2. サーバからの接続OKという応答
3. データを送信する

## HTTP/1.1

## HTTP/2.0

## HTTP/3.0
